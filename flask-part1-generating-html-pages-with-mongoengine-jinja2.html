<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Aly Sivji" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Generating HTML Pages from MongoDB with MongoEngine and Jinja2 (Flask Part 1)"/>
    <meta property="og:url" content="./flask-part1-generating-html-pages-with-mongoengine-jinja2.html"/>
      <meta property="article:section" content="Tutorials"/>
        <meta property="article:tag" content="python"/>
        <meta property="article:tag" content="how-to"/>
        <meta property="article:tag" content="flask"/>
        <meta property="article:tag" content="mongodb"/>
        <meta property="article:tag" content="reddit-scraper"/>
        <meta property="og:image"
              content="https://alysivji.github.io/images/main/siv.jpeg"/>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Generating HTML Pages from MongoDB with MongoEngine and Jinja2 (Flask Part 1)">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="@CaiusSivjus">
    <meta name="twitter:creator" content="@CaiusSivjus">
    <meta name="twitter:domain" content=".">
        <meta property="twitter:image"
              content="https://alysivji.github.io/images/main/siv.jpeg"/>

    <title>Generating HTML Pages from MongoDB with MongoEngine and Jinja2 (Flask Part 1) - Siv Scripts</title>

        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
            crossorigin="anonymous">


      <link rel="stylesheet" href="./theme/css/tango.css" />
      <link rel="stylesheet" href="./theme/css/voidybootstrap.css" />
      <link rel="stylesheet" href="./theme/css/dataframe.css" />
      <link rel="stylesheet" href="./theme/css/custom.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js" integrity="sha384-FFgGfda92tXC8nCNOxrCQ3R8x1TNkMFqDZVQdDaaJiiVbjkPBXIJBx0o7ETjy8Bh" crossorigin="anonymous"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js" integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo" crossorigin="anonymous"></script>
    <![endif]-->

    <link rel="shortcut icon" href="./files/favicon.ico" />
        <link href="http://alysivji.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Siv Scripts Atom Feed" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90986575-1', '');
  ga('send', 'pageview');

</script>
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle"
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="./" rel="home">
          <i class="fa fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
              <li>
                <a href="./pages/about.html">About</a>
              </li>
              <li>
                <a href="./pages/talks.html">Talks</a>
              </li>
            <li class="divider"></li>
            <li class="">
              <a href="./archives.html">Archives</a>
            </li>
          <li class="divider"></li>
            <li><a href="http://alysivji.github.io/feeds/all.atom.xml"
                   type="application/atom+xml" rel="alternate">
                <i class="fa fa-rss fa-fw fa-lg"></i> </a></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="./">Siv Scripts</a></h1>
		<p class="lead">Solving Problems Using Code</p>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Sun 02 April 2017
</abbr> <h1>
  <a href="./flask-part1-generating-html-pages-with-mongoengine-jinja2.html" rel="bookmark"
     title="Permalink to Generating HTML Pages from MongoDB with MongoEngine and Jinja2 (Flask Part 1)">
    Generating HTML Pages from MongoDB with MongoEngine and Jinja2 (Flask Part 1)
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="./author/aly-sivji.html">Aly Sivji</a>
    in 
    <a href="./category/tutorials.html">
      Tutorials</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<p>(Note: This post is part of my <a href="https://alysivji.github.io/tag/reddit-scraper.html">reddit-scraper series</a>)</p>
<blockquote>
<h4>Summary</h4>
<ul>
<li>Overview of MongoDB</li>
<li>Discussion of Object-Relational Mapping (ORM)</li>
<li>Use MongoEngine to get items out of MongoDB</li>
<li>Render HTML pages using Jinja2</li>
<li>Interact with REST API to send emails with Requests</li>
</ul>
</blockquote>
<hr>
<p><a href="https://alysivji.github.io/mongodb-pipelines-in-scrapy.html">Previously on Siv Scripts</a>, we implemented a web scraping pipeline to store Top Posts scraped from Reddit into a MongoDB collection. The information we collected will become useful once it's out of the database so let's explore different ways of getting and using the data.</p>
<p>The obvious solution is to utilize a <a href="https://wiki.python.org/moin/WebFrameworks">Python Web Framework</a> to create a website that displays posts from various subreddits and allows users to mark items they have already seen. Based on our needs, <a href="http://flask.pocoo.org">Flask</a> is the best tool for the job. Creating a Flask-based site requires that we familiarize ourselves with the <a href="http://flask.pocoo.org">Flask</a>, <a href="http://flask.pocoo.org/docs/latest/patterns/">its recommended design patterns</a>, as well as <a href="http://flask.pocoo.org/extensions/">the various extensions that enable us to create full-featured user experiences</a>.</p>
<p>This will take a few posts to cover in depth so let's start at the beginning and explore how to generate HTML pages from MongoDB documents using the <a href="http://mongoengine.org/">MongoEngine ORM</a> and <a href="http://jinja.pocoo.org/">Jinja2 Templating Engine</a>. We will then leverage the <a href="http://docs.python-requests.org/en/master/">Requests library</a> to send emails using <a href="http://www.mailgun.com/">MailGun's REST API</a>; this will provide us with a temporary workaround to view scraped data until our Flask website is complete.</p>
<hr>
<h2>What You Need to Follow Along</h2>
<h3>Development Tools (Stack)</h3>
<ul>
<li><a href="https://www.python.org/downloads/">Python 3</a></li>
<li><a href="https://docs.mongodb.com/manual/installation/">MongoDB</a></li>
<li><a href="http://docs.mongoengine.org/guide/installing.html">MongoEngine</a></li>
<li><a href="http://jinja.pocoo.org/docs/2.9/intro/#installation">Jinja2</a></li>
<li><a href="http://docs.python-requests.org/en/master/user/install/#install">Requests</a></li>
<li><a href="https://mailgun.com/signup">MailGun account</a><ul>
<li>Free account is limited to 10K emails per month, more than enough for our purposes</li>
</ul>
</li>
</ul>
<h3>Code</h3>
<ul>
<li><a href="https://github.com/alysivji/reddit-top-posts-email-from-mongodb">Github Repo</a></li>
</ul>
<hr>
<h2>MongoDB</h2>
<p>In this section we will explore <a href="http://mongodb.com/">MongoDB</a>, discuss best practices, and examine how it fits into our project.</p>
<h3>Overview</h3>
<p>"MongoDB is an open-source document database that provides high performance, high availability, and automatic scaling" (<a href="https://docs.mongodb.com/manual/introduction/">Mongo Docs</a>).</p>
<p><em>What does this mean?</em> In comparison to a relational database which focuses on linking data across tables with keys, a document database stores all the data elements together in one location.</p>
<p><img src="/images/01-09/3_relational_vs_mongo_diagram.png" alt="Comparing Relational Databases to MongoDB" width=500/></p>
<p>There are <a href="https://www.quora.com/What-is-the-use-case-to-choose-a-document-oriented-database-noSQL-over-RDBMS">many reasons to use document-oriented databases over their relational counterparts</a>. As our database will be the main data source for a variety of projects, it makes sense to use Mongo and take advantage of its <a href="https://www.mongodb.com/blog/post/why-schemaless">flexible schemaless structure</a>: <em>our database can grow with the needs of our project</em>.</p>
<p>Other reasons to use MongoDB:</p>
<ul>
<li><a href="https://www.quora.com/What-will-be-a-use-case-to-choose-MongoDB-over-other-NoSQL-databases/answer/John-A-De-Goes?srid=hwG0">Rapid, agile development and deployment of web applications</a></li>
<li><a href="https://docs.mongodb.com/manual/">Fantastic documentation</a></li>
<li><a href="https://api.mongodb.com/">MongoDB has official drivers for all major languages</a></li>
<li>MongoDB <a href="https://www.mongodb.com/press/wired-tiger">acquired WiredTiger</a> and improved query performance</li>
<li><a href="http://stackoverflow.com/questions/tagged/mongodb">Over 78K 'mongodb'-tagged questions on StackOverflow</a> <em>(Praise Be)</em></li>
</ul>
<h3>Technical Details</h3>
<p>From the <a href="https://docs.mongodb.com/manual/introduction/">Mongo Docs</a>:</p>
<blockquote>
<p>A record in MongoDB is a document, which is a data structure composed of field and value pairs. MongoDB documents are similar to JSON objects. The values of fields may include other documents, arrays, and arrays of documents<br />
<img src="/images/01-09/3_mongodb_document_diagram.svg" alt="MongoDB record information" width=350/></p>
</blockquote>
<p>MongoDB stores records as BSON (<a href="https://en.wikipedia.org/wiki/BSON">Binary-JSON</a>) documents in collections and collections inside of databases (<a href="https://docs.mongodb.com/manual/core/databases-and-collections/">additional details</a>).</p>
<p>When we send a query into Mongo, it <a href="https://docs.mongodb.com/manual/indexes/">performs a collection scan</a>, i.e. it scans every document in our queried collection. This means that performance will become an issue as our data scales. To alleviate this, we can create indexes (<a href="https://docs.mongodb.com/manual/core/index-single/">single field</a>, <a href="https://docs.mongodb.com/manual/core/index-compound/">compound</a>, <a href="https://docs.mongodb.com/manual/core/index-multikey/">multikey</a>, or <a href="https://docs.mongodb.com/manual/core/index-text/">text</a>) to ensure all calls to the database are quick.</p>
<p>We're glossing over a lot of the details here since database design and optimization is a field unto itself. While we are setting up our database, we will implement the following index strategy recommendations <a href="https://docs.mongodb.com/manual/applications/indexes/">(from the MongoDB documentation)</a>:</p>
<ul>
<li>Create Indexes to Support Your Queries</li>
<li>Use Indexes to Sort Query Results</li>
<li>Ensure Indexes Fit in RAM</li>
<li>Create Queries that Ensure Selectivity</li>
</ul>
<h3>MongoDB in Our Project</h3>
<h4>Loading Data</h4>
<p>If you did not follow along the previous post, you can <a href="./files/20170309-reddit-posts.json">download the 20170309 data extract</a> and import it into your instance of mongo using the following command:</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> mongoimport --db sivji-sandbox --collection top_reddit_posts --type json --file <span class="m">20170309</span>-reddit-posts.json
<span class="go">2017-03-09T15:14:51.021-0700    connected to: localhost</span>
<span class="go">2017-03-09T15:14:51.043-0700    imported 551 documents</span>
</pre></div>


<h4>Document Schema</h4>
<p>Let's use <a href="https://www.mongodb.com/products/compass">MongoDB Compass</a> and take a look at a sample document to understand the fields we can pull.</p>
<p><img src="/images/01-09/3_top_reddit_posts_mongodb-sample-document.png" alt="Sample Document" width=750/></p>
<p>The <code>date_str</code> field is a string version of the date field. Having a <code>string</code> type versus an <code>ISODate</code> type will make our queries run faster.</p>
<p><a name="creating-mongodb-indexes"></a></p>
<h4>Creating Indexes</h4>
<p>Following the best practices mentioned above, we should take some time to think about the <a href="http://docs.mongoengine.org/guide/querying.html">queries we will need to run</a>. Taking a step back, we need to consider the kinds of data we will want our website to display.</p>
<p><img src="/images/01-09/3_views_indexes_required.png" alt="Indexes to Support Views Required" width=600/></p>
<p>Use MongoDB Compass to create the index. Should look as follows:</p>
<p><img src="/images/01-09/3_mongodb_indexes.png" alt="Creating an Index in MongoDB" width=450/></p>
<p>Our database is all set up and optimized. In the next section we will explore how to get data out of Mongo and into our program.</p>
<h5>Note</h5>
<ul>
<li>Adding score to the index will make our queries run faster, but the index will also take up disk space. This example is a bit trivial since it's a toy project, but we should get into the habit of thinking about tradeoffs.</li>
</ul>
<hr>
<h2>Object-Relational Mapping (ORM)</h2>
<h3>Overview</h3>
<p>Object-Relational Mapping (ORM) is a "technique that lets [us] query and manipulate data from a database using an object-oriented paradigm" (<a href="http://stackoverflow.com/questions/1279613/what-is-an-orm-and-where-can-i-learn-more-about-it">Source</a>).</p>
<p><em>What does this mean?</em> ORM libraries let us work with databases in the language of our choice. No more fumbling around with database connectors and SQL, we can treat objects in the database as objects in our program. <a href="http://stackoverflow.com/questions/1279613/what-is-an-orm-and-where-can-i-learn-more-about-it">More details can be found in this StackOverflow <em>(Praise Be)</em> discussion</a>.</p>
<p>Like with all things in programming, <a href="http://www.yegor256.com/2014/12/01/orm-offensive-anti-pattern.html">there</a> <a href="https://martinfowler.com/bliki/OrmHate.html">are</a> <a href="https://blog.codinghorror.com/object-relational-mapping-is-the-vietnam-of-computer-science/">people</a> <a href="http://blogs.tedneward.com/post/the-vietnam-of-computer-science/">who</a> <a href="http://seldo.com/weblog/2011/08/11/orm_is_an_antipattern">consider</a> ORMs to be <a href="https://en.wikipedia.org/wiki/Anti-pattern">anti-patterns</a>. As long as we understand the limitations of using an ORM library (i.e. not a full replacement for querying languages), we can use them to get our projects off the ground quickly. As we scale up, we should revisit the use of an ORM.</p>
<h3>ORM Libraries in Python</h3>
<p>For relational databases, <a href="http://www.sqlalchemy.org/">SQL Alchemy</a> reigns supreme. <a href="https://ponyorm.com/">PonyORM</a> uses <a href="https://wiki.python.org/moin/Generators">generators</a> and <a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk">lambdas</a> (<em>Author's Note: (☞ﾟヮﾟ)☞</em>) to write its queries.</p>
<p>Since MongoDB is a document database, Object-Relational Mapping becomes Document-Object Mapping (DOM). <a href="http://mongoengine.org/">MongoEngine</a> and <a href="http://namlook.github.io/mongokit/">MongoKit</a> are two popular DOM libraries. In the next section, we will use the MongoEngine library to pull data into our program from our instance of MongoDB.</p>
<hr>
<h2>MongoEngine</h2>
<p>Using the <a href="http://docs.mongoengine.org/tutorial.html">tutorial</a> and <a href="http://docs.mongoengine.org/guide/index.html">User Guide</a> as a template, lets create a class to specify our schema.</p>
<div class="highlight"><pre><span></span><span class="c1"># top_post_emailer/data_model.py</span>

<span class="kn">from</span> <span class="nn">mongoengine.document</span> <span class="kn">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">mongoengine.fields</span> <span class="kn">import</span> <span class="n">DateTimeField</span><span class="p">,</span> <span class="n">IntField</span><span class="p">,</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">URLField</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Class for defining structure of reddit-top-posts collection</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URLField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">date_str</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">commentsUrl</span> <span class="o">=</span> <span class="n">URLField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># subredit can be 20 chars</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># title can be 300 chars</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">IntField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;collection&#39;</span><span class="p">:</span> <span class="s1">&#39;top_reddit_posts&#39;</span><span class="p">,</span> <span class="c1"># collection name</span>
        <span class="s1">&#39;ordering&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-score&#39;</span><span class="p">],</span> <span class="c1"># default ordering</span>
        <span class="s1">&#39;auto_create_index&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="c1"># MongoEngine will not create index</span>
        <span class="p">}</span>
</pre></div>


<p>Let's make sure this works by testing in the Python REPL.</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> python
<span class="go">Python 3.6.0 |Continuum Analytics, Inc.| (default, Dec 23 2016, 13:19:00)</span>
<span class="go">[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;</span>&gt;&gt; from mongoengine.connection import connect
<span class="gp">&gt;</span>&gt;&gt; from top_post_emailer.data_model import Post
<span class="gp">&gt;</span>&gt;&gt; <span class="nv">MONGO_URI</span> <span class="o">=</span> <span class="s1">&#39;mongodb://localhost:27017&#39;</span>
<span class="gp">&gt;</span>&gt;&gt; connect<span class="o">(</span><span class="s1">&#39;sivji-sandbox&#39;</span>, <span class="nv">host</span><span class="o">=</span>MONGO_URI<span class="o">)</span>
<span class="go">MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True, read_preference=Primary())</span>
<span class="gp">&gt;</span>&gt;&gt; Post.objects<span class="o">()[</span><span class="m">0</span><span class="o">]</span>.title
<span class="go">&#39;Chrome 56 Will Aggressively Throttle Background Tabs&#39;</span>
</pre></div>


<p>Looks good!</p>
<h5>Notes</h5>
<ul>
<li>The MongoEngine tutorial performs a wildcard import. <a href="https://www.python.org/dev/peps/pep-0008/">PEP-0008</a> recommends that we stay away from this style of importing as to not clutter the namespace, which confuses both readers and many automated tools</li>
<li>MongoEngine allows us to <a href="http://docs.mongoengine.org/guide/connecting.html#multiple-databases">connect to multiple databases</a> and <a href="http://docs.mongoengine.org/guide/connecting.html#context-managers">use context-managers to switch between databases and collections</a> (<em>Author's Note: How Pythonic!</em>)</li>
<li>MongoEngine has <a href="http://docs.mongoengine.org/guide/defining-documents.html#fields">a lot of built-in field types</a> that we can use for validation checks</li>
</ul>
<hr>
<h2>Jinja2</h2>
<p>Jinja2 is a "modern and designer-friendly templating language for Python" that is the default templating engine bundled with Flask (<a href="http://jinja.pocoo.org/docs/2.9/">additional info can be found in the Jinja docs</a>).</p>
<p><em>What does this mean?</em> Jinja2 lets us create templates with programming logic (<a href="http://jinja.pocoo.org/docs/2.9/templates/#list-of-control-structures">control structures</a>, <a href="http://jinja.pocoo.org/docs/2.9/templates/#template-inheritance">inheritance</a>) that can be rendered into HTML as the template code is evaluated. This will allow us to build dynamic, database-driven websites using Python! Real Python has a <a href="https://realpython.com/blog/python/primer-on-jinja-templating/">great primer on Jinja Templating</a>.</p>
<p>Let's start with a basic template that will grab all the Top Posts from the last Reddit scrape.</p>
<div class="highlight"><pre><span></span><span class="c">&lt;!-- top_post_emailer/template.html --&gt;</span>

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Reddit Top <span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;posts&quot;</span><span class="p">&gt;</span>
    {% for selected_sub in Post.objects(date_str__gte=day_to_pull).distinct(&#39;sub&#39;) %}
        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>{{ selected_sub }}<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

        {% for post in Post.objects(date_str__gte=day_to_pull, sub=selected_sub) %}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="p">&gt;</span>{{ post.title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> (Score: {{ post.score }} | <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot; {{ post.commentsUrl }}&quot;</span><span class="p">&gt;</span>Comments<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>)<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        {% endfor %}

    {% endfor %}
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>


<p>We will need a way to render our Jinja2 template. Let's create a function:</p>
<div class="highlight"><pre><span></span><span class="c1"># top_post_emailer/render_template.py</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">jinja2</span>

<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Given jinja2 template, generate HTML</span>
<span class="sd">    Adapted from http://matthiaseisen.com/pp/patterns/p0198/</span>

<span class="sd">    Args:</span>
<span class="sd">        * filename - jinja2 template</span>
<span class="sd">        * context - dict of variables to pass in</span>

<span class="sd">    Returns:</span>
<span class="sd">        * rendered HTML from jinja2 templating engine</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">jinja2</span><span class="o">.</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="n">path</span> <span class="ow">or</span> <span class="s1">&#39;./&#39;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>


<p>Let's go back to our Python REPL and test to see if this works:</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;</span>&gt;&gt; from top_post_emailer.render_template import render
<span class="gp">&gt;</span>&gt;&gt; <span class="c1">## get the last date the webscraper was run</span>
<span class="go">... for post in Post.objects().fields(date_str=1).order_by(&#39;-date_str&#39;).limit(1):</span>
<span class="go">...     day_to_pull = post.date_str</span>
<span class="go">...</span>
<span class="gp">&gt;</span>&gt;&gt; <span class="c1">## pass in variables, render template, and send</span>
<span class="go">... context = {</span>
<span class="go">...     &#39;day_to_pull&#39;: day_to_pull,</span>
<span class="go">...     &#39;Post&#39;: Post,</span>
<span class="go">... }</span>
<span class="gp">&gt;</span>&gt;&gt; print<span class="o">(</span>render<span class="o">(</span><span class="s2">&quot;template.html&quot;</span>, context<span class="o">))</span>
<span class="go">&lt;!DOCTYPE html&gt;</span>
<span class="go">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="go">&lt;head&gt;</span>
<span class="go">    &lt;title&gt;Reddit Top &lt;/title&gt;</span>
<span class="go">&lt;/head&gt;</span>
<span class="go">&lt;body&gt;</span>
<span class="go">... additional rows omitted ...</span>
</pre></div>


<p>Great! In the next section we will email ourselves this information.</p>
<h5>Note</h5>
<ul>
<li>Once we start building out our Flask website, we can create complex Jinja templates with tables that have <a href="http://jinja.pocoo.org/docs/2.9/tricks/#alternating-rows">alternating row styles</a></li>
</ul>
<hr>
<h2>Requests and MailGun API</h2>
<p>Let's finish off this post by creating a <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">minimum viable product (MVP)</a>: a program that emails us a list of all Top Posts scraped from our last Scrapy run. We will use <a href="http://docs.python-requests.org/en/master/">Requests</a> library to interact with <a href="https://www.mailgun.com/">MailGun</a>'s REST API to <a href="https://documentation.mailgun.com/quickstart-sending.html#how-to-start-sending-email">send HTML emails</a>.</p>
<p>What can we say about <a href="https://github.com/kennethreitz/">Kenneth Reitz</a>'s Requests: HTTP for Humans <a href="http://www.pythonforbeginners.com/requests/using-requests-in-python">that</a> <a href="http://pydanny.blogspot.com/2011/05/python-http-requests-for-humans.html">hasn't</a> <a href="https://www.twilio.com/blog/2016/12/http-requests-in-python-3.html">already</a> <a href="https://www.dataquest.io/blog/python-api-tutorial/">been</a> <a href="http://cramer.io/2014/05/20/mocking-requests-with-responses">said</a>? Nothing. Check the links for more info.</p>
<p>After a little Python, we come up with the following:</p>
<div class="highlight"><pre><span></span><span class="c1"># top_post_emailer/mailgun_emailer.py</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">configparser</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">HTTPError</span>

<span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Given HTML template, sends Reddit Top Post Digest email using MailGun&#39;s API</span>

<span class="sd">    Arg:</span>
<span class="sd">        html - HTML to send via email</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">## api params (using configparser)</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">&#39;settings.cfg&#39;</span><span class="p">))</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MailGun&#39;</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">)</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MailGun&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">)</span>

    <span class="c1">## set requests params</span>
    <span class="n">request_url</span> <span class="o">=</span> <span class="s1">&#39;https://api.mailgun.net/v3/{0}/messages&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;alysivji@gmail.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;alysivji@gmail.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="s1">&#39;Reddit Top Post Digest&#39;</span><span class="p">,</span>
        <span class="s1">&#39;html&#39;</span><span class="p">:</span> <span class="n">html</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">request_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;api&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Error {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># top_post_emailer/settings.cfg</span>

<span class="p">[</span><span class="n">MailGun</span><span class="p">]</span>
<span class="n">api</span> <span class="o">=</span> <span class="p">[</span><span class="n">Your</span> <span class="n">MailGun</span> <span class="n">API</span> <span class="n">key</span> <span class="n">here</span><span class="p">]</span>
<span class="n">domain</span> <span class="o">=</span> <span class="p">[</span><span class="n">Your</span> <span class="n">MailGun</span> <span class="n">domain</span> <span class="n">here</span><span class="p">]</span>
</pre></div>


<h5>Notes</h5>
<ul>
<li>We used <a href="https://docs.python.org/3/library/configparser.html">ConfigParser</a> to keep our API keys secret. Check out <a href="https://pymotw.com/3/">PyMOTW</a>'s <a href="https://pymotw.com/3/configparser/">in-depth post about ConfigParser</a>. (<em>Author's Note: How awesome is the <a href="https://docs.python.org/3/library/">Python Standard Library</a>?</em>)</li>
<li>Shoutout to this post showing <a href="https://bradgignac.com/2014/05/12/sending-email-with-python-and-the-mailgun-api.html">how to send emails thru MailGun using Python</a></li>
<li>The <a href="docs.python-requests.org/en/master/">documentation for the Request library</a> is really good. Go check it out. Also go check out the <a href="https://github.com/kennethreitz/requests/">codebase</a>. Very Pythonic.</li>
<li>According to <a href="https://www.python.org/dev/peps/pep-0020/"><em>The Zen of Python</em></a>: "Errors should never pass silently. Unless explicitly silenced." This means we should always try to have exception handling logic in our code. And when possible, <a href="http://oncodingstyle.blogspot.com/2008/10/fail-early-fail-loudly.html">FAIL LOUDLY</a>. Found a great StackOverflow <em>(Praise Be)</em> <a href="http://stackoverflow.com/questions/33291788/how-to-use-exceptions-for-different-cases-with-python-requests/33292013">discussion on how to handle exceptions in Requests</a></li>
</ul>
<hr>
<h2>Putting it all Together</h2>
<p>Now that we have all the pieces in place, we can finally write our script to get data out of Mongo and into a Jinja2 template. We can then use MailGun's REST API to send emails.</p>
<div class="highlight"><pre><span></span><span class="c1"># top_post_emailer/__init__.py</span>

<span class="kn">from</span> <span class="nn">mongoengine.connection</span> <span class="kn">import</span> <span class="n">connect</span>
<span class="kn">from</span> <span class="nn">.data_model</span> <span class="kn">import</span> <span class="n">Post</span>
<span class="kn">from</span> <span class="nn">.render_template</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">.mailgun_emailer</span> <span class="kn">import</span> <span class="n">send_email</span>

<span class="k">def</span> <span class="nf">email_last_scraped_date</span><span class="p">():</span>
    <span class="c1"># connect to db</span>
    <span class="n">MONGO_URI</span> <span class="o">=</span> <span class="s1">&#39;mongodb://localhost:27017&#39;</span>
    <span class="n">connect</span><span class="p">(</span><span class="s1">&#39;sivji-sandbox&#39;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">MONGO_URI</span><span class="p">)</span>

    <span class="c1">## get the last date the webscraper was run</span>
    <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">date_str</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-date_str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">day_to_pull</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">date_str</span>

    <span class="c1">## pass in variables, render template, and send</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;day_to_pull&#39;</span><span class="p">:</span> <span class="n">day_to_pull</span><span class="p">,</span>
        <span class="s1">&#39;Post&#39;</span><span class="p">:</span> <span class="n">Post</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="s2">&quot;template.html&quot;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="n">send_email</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>


<p>We have <a href="https://docs.python.org/3/tutorial/modules.html#packages">structured our app as a package</a> and we need to create a script to run the application. First we will ensure that our directory structure looks as follows:</p>
<div class="highlight"><pre><span></span><span class="go">.</span>
<span class="go">├── README.md</span>
<span class="go">├── app.py</span>
<span class="go">└── top_post_emailer</span>
<span class="go">    ├── __init__.py</span>
<span class="go">    ├── data_model.py</span>
<span class="go">    ├── mailgun_emailer.py</span>
<span class="go">    ├── render_template.py</span>
<span class="go">    ├── settings.cfg</span>
<span class="go">    └── template.html</span>
</pre></div>


<p>Now let's create our script:</p>
<div class="highlight"><pre><span></span><span class="c1"># app.py</span>

<span class="sd">&quot;&quot;&quot;Script to pull and email last Reddit scape from MongoDB</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">top_post_emailer</span> <span class="kn">import</span> <span class="n">email_last_scraped_date</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">email_last_scraped_date</span><span class="p">()</span>
</pre></div>


<p>Run the app from the terminal with the following command:</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> python app.py
<span class="go">Success!</span>
</pre></div>


<p>Did we receive an email?<br />
<img src="/images/01-09/3_email_digest_in_inbox.png" alt="Email Digest in Inbox" width=450/></p>
<p><a href="https://www.youtube.com/watch?v=EvkAy4kzv54">YIPPEE!</a></p>
<h5>Notes</h5>
<ul>
<li>This application is <a href="https://docs.python.org/3/tutorial/modules.html#packages">structured as a package</a>, namely the <code>top_post_emailer</code> package. Packages allow us to separate namespaces, increasing code modularity. I plan to examine this topic in a future post. For now, check out <a href="https://www.youtube.com/watch?v=0oTh1CXRaQ0">David Beazley's tutorial from PyCon2015</a>.</li>
</ul>
<hr>
<h2>Conclusion</h2>
<p>In this post, we started to look into ways of getting data out of MongoDB and into the hands of our user. We decided to use the Flask framework and started getting our feet wet by generating HTML pages from items stored in our MongoDB instance using MongoEngine and Jinja2. Lastly, we wrote some code to email ourselves the HTML page we created using Requests and the MailGun REST API. This gave us a minimal viable product we can use until we get our Flask website up.</p>
<p>In a future post, we will build upon what we learned and deploy a basic Flask website.</p>
  </div>

<div class="article-tag-list">
<span class="label label-default">Tags</span>
	<a href="./tag/python.html"><i class="fa fa-tag"></i>python</a>&nbsp;
	<a href="./tag/how-to.html"><i class="fa fa-tag"></i>how-to</a>&nbsp;
	<a href="./tag/flask.html"><i class="fa fa-tag"></i>flask</a>&nbsp;
	<a href="./tag/mongodb.html"><i class="fa fa-tag"></i>mongodb</a>&nbsp;
	<a href="./tag/reddit-scraper.html"><i class="fa fa-tag"></i>reddit-scraper</a>&nbsp;
</div>  <hr />
  <div class="well well-sm">  <!-- Social media sharing buttons -->
    <!-- Twitter -->
    <a href="https://twitter.com/share" class="twitter-share-button" 
       data-via="CaiusSivjus" >Tweet</a>&nbsp;

    <!-- Google+ -->
    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <div class="g-plusone" data-size="medium"></div>&nbsp;

    <!-- Facebook -->
    <div class="fb-like" 
        data-href="./flask-part1-generating-html-pages-with-mongoengine-jinja2.html" 
        data-layout="button_count" 
        data-action="like" data-show-faces="true" 
        data-share="true">
    </div>
    &nbsp;
  </div> <!-- /Social media sharing buttons -->
  <div class="comments">
	<h2>Comments</h2>
	<div id="disqus_thread"></div>
	<script type="text/javascript">
				   (function() {
						var dsq = document.createElement('script');
						dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//siv-scripts.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] ||
						 document.getElementsByTagName('body')[0]).appendChild(dsq);
				  })();
	</script>
  </div>
</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="http://linkedin.com/in/alysivji/" target="_blank">
	  <i class="fa fa-linkedin-square fa-fw fa-lg" title="LinkedIn"></i>
		LinkedIn
	</a></li>
    <li><a href="http://github.com/alysivji" target="_blank">
	  <i class="fa fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
    <li><a href="https://twitter.com/CaiusSivjus" target="_blank">
	  <i class="fa fa-twitter-square fa-fw fa-lg" title="Twitter"></i>
		Twitter
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="./category/data-analysis.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Data Analysis</a></li>
  <li><a href="./category/deep-dives.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Deep Dives</a></li>
  <li><a href="./category/quick-hits.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Quick Hits</a></li>
  <li><a href="./category/thoughts.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Thoughts</a></li>
  <li><a href="./category/tutorials.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Tutorials</a></li>
</ul>
</div>

</div> <!-- /row -->

<h4><i class="fa fa-tags fa-fw fa-lg"></i> Tags</h4>
<p class="tag-cloud">
    <span class="tag-2">
      <a href="./tag/mongodb.html">
          <i class="fa fa-tag"></i>
        mongodb
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/pandas.html">
          <i class="fa fa-tag"></i>
        pandas
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/testing.html">
          <i class="fa fa-tag"></i>
        testing
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/mac.html">
          <i class="fa fa-tag"></i>
        mac
      </a>
    </span>
    <span class="tag-3">
      <a href="./tag/web-scraping.html">
          <i class="fa fa-tag"></i>
        web-scraping
      </a>
    </span>
    <span class="tag-1">
      <a href="./tag/how-to.html">
          <i class="fa fa-tag"></i>
        how-to
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/terminal.html">
          <i class="fa fa-tag"></i>
        terminal
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/gis.html">
          <i class="fa fa-tag"></i>
        gis
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/php.html">
          <i class="fa fa-tag"></i>
        php
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/data-viz.html">
          <i class="fa fa-tag"></i>
        data-viz
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/docker.html">
          <i class="fa fa-tag"></i>
        docker
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/elasticsearch.html">
          <i class="fa fa-tag"></i>
        elasticsearch
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/data-science.html">
          <i class="fa fa-tag"></i>
        data-science
      </a>
    </span>
    <span class="tag-3">
      <a href="./tag/flask.html">
          <i class="fa fa-tag"></i>
        flask
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/review.html">
          <i class="fa fa-tag"></i>
        review
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/pythonic.html">
          <i class="fa fa-tag"></i>
        pythonic
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/math.html">
          <i class="fa fa-tag"></i>
        math
      </a>
    </span>
    <span class="tag-3">
      <a href="./tag/software-engineering.html">
          <i class="fa fa-tag"></i>
        software-engineering
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/web-development.html">
          <i class="fa fa-tag"></i>
        web-development
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/vim.html">
          <i class="fa fa-tag"></i>
        vim
      </a>
    </span>
    <span class="tag-3">
      <a href="./tag/book.html">
          <i class="fa fa-tag"></i>
        book
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/reddit-scraper.html">
          <i class="fa fa-tag"></i>
        reddit-scraper
      </a>
    </span>
    <span class="tag-4">
      <a href="./tag/art-of-developer-testing.html">
          <i class="fa fa-tag"></i>
        art-of-developer-testing
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/exploring-pypi.html">
          <i class="fa fa-tag"></i>
        exploring-pypi
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/productivity.html">
          <i class="fa fa-tag"></i>
        productivity
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/workflow.html">
          <i class="fa fa-tag"></i>
        workflow
      </a>
    </span>
    <span class="tag-2">
      <a href="./tag/cest-la-vie.html">
          <i class="fa fa-tag"></i>
        c'est-la-vie
      </a>
    </span>
    <span class="tag-3">
      <a href="./tag/grad-school.html">
          <i class="fa fa-tag"></i>
        grad-school
      </a>
    </span>
    <span class="tag-1">
      <a href="./tag/python.html">
          <i class="fa fa-tag"></i>
        python
      </a>
    </span>
</p>
<h4><i class="fa fa-rss fa-fw fa-lg"></i> Feeds</h4>
<ul class="list-unstyled">
    <li><a href="http://alysivji.github.io/feeds/all.atom.xml" 
		   type="application/atom+xml" rel="alternate">
		<i class="fa fa-rss-square fa-fw fa-lg"></i> Atom Feed</a></li>
</ul>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by
        <a href="http://www.robertiwancz.com/"
           target="_blank">RKI</a>
        </p>
      </address><!-- /colophon  -->
    </footer>

<!-- DISQUS script for displaying comment count -->
<script type="text/javascript">
    var disqus_shortname = 'siv-scripts';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google+ -->
<!-- Synchronous 
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
-->
<!-- Asynchronous -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>  </body>
</html>